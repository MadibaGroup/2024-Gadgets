<!doctype html><html lang=en-us dir=ltr><head><meta name=generator content="Hugo 0.126.1"><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Plonkbook: A Handbook for Poly-IOP Gadgets # A handbook for gadgets in the polynomial interactive oracle proof (Poly-IOP) model used by Plonk.
Contributors: Elizabeth van Oorschot (McGill), Youwei Deng (Concordia), Jeremy Clark (Concordia)
Some rights reserved: cc-by 4.0
@misc{vODC24, author = {Elizabeth van Oorschot and Youwei Deng and Jeremy Clark}, title = {Plonkbook: A Handbook for Poly-IOP Gadgets}, howpublished = {GitHub Pages}, year = {2024}, url = {https://madibagroup.github.io/2024-Gadgets} } Motivation # The zoo of zk-SNARKs is complex to navigate and always changing."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://madibagroup.github.io/2024-Gadgets/"><meta property="og:site_name" content="Handbook"><meta property="og:title" content="Plonkbook"><meta property="og:description" content="Plonkbook: A Handbook for Poly-IOP Gadgets # A handbook for gadgets in the polynomial interactive oracle proof (Poly-IOP) model used by Plonk.
Contributors: Elizabeth van Oorschot (McGill), Youwei Deng (Concordia), Jeremy Clark (Concordia)
Some rights reserved: cc-by 4.0
@misc{vODC24, author = {Elizabeth van Oorschot and Youwei Deng and Jeremy Clark}, title = {Plonkbook: A Handbook for Poly-IOP Gadgets}, howpublished = {GitHub Pages}, year = {2024}, url = {https://madibagroup.github.io/2024-Gadgets} } Motivation # The zoo of zk-SNARKs is complex to navigate and always changing."><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><title>Plonkbook | Handbook</title>
<link rel=manifest href=/2024-Gadgets/manifest.json><link rel=icon href=/2024-Gadgets/favicon.png><link rel=canonical href=https://madibagroup.github.io/2024-Gadgets/><link rel=stylesheet href=/2024-Gadgets/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/2024-Gadgets/fuse.min.js></script><script defer src=/2024-Gadgets/en.search.min.ea78c947d32bb19f02a50d1a3bcfa901f1d097a262a6f4afb67eee1f4de2ed97.js integrity="sha256-6njJR9MrsZ8CpQ0aO8+pAfHQl6JipvSvtn7uH03i7Zc=" crossorigin=anonymous></script><link rel=alternate type=application/rss+xml href=https://madibagroup.github.io/2024-Gadgets/index.xml title=Handbook><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["\\[","\\]"],["$$","$$"]],inlineMath:[["\\(","\\)"],["$","$"]]}}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/2024-Gadgets/><span>Handbook</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><p><strong>Background</strong></p></li><li><p><a href=/2024-Gadgets/docs/background/poly-iop/>Poly IOP</a></p></li><li><p><strong>Gadgets</strong></p></li><li><p><a href=/2024-Gadgets/docs/gadgets/zero1/>zero1</a></p></li><li><p><a href=/2024-Gadgets/docs/gadgets/mult1/>mult1</a></p></li><li><p><a href=/2024-Gadgets/docs/gadgets/mult2/>mult2</a></p></li><li><p><a href=/2024-Gadgets/docs/gadgets/lookup2/>lookup2</a></p></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/2024-Gadgets/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Plonkbook</strong>
<label for=toc-control><img src=/2024-Gadgets/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#motivation>Motivation</a></li><li><a href=#gadgets>Gadgets</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=plonkbook-a-handbook-for-poly-iop-gadgets>Plonkbook: A Handbook for Poly-IOP Gadgets
<a class=anchor href=#plonkbook-a-handbook-for-poly-iop-gadgets>#</a></h1><p><em>A handbook for gadgets in the polynomial interactive oracle proof (Poly-IOP) model used by Plonk.</em></p><p><em>Contributors: Elizabeth van Oorschot (McGill), Youwei Deng (Concordia), Jeremy Clark (Concordia)</em></p><p><em>Some rights reserved: <a href=https://creativecommons.org/licenses/by/4.0/>cc-by 4.0</a></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-latex data-lang=latex><span style=display:flex><span>@misc{vODC24,
</span></span><span style=display:flex><span>      author = {Elizabeth van Oorschot and Youwei Deng and Jeremy Clark},
</span></span><span style=display:flex><span>      title = {Plonkbook: A Handbook for Poly-IOP Gadgets},
</span></span><span style=display:flex><span>      howpublished = {GitHub Pages},
</span></span><span style=display:flex><span>      year = {2024},
</span></span><span style=display:flex><span>      url = {https://madibagroup.github.io/2024-Gadgets}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=motivation>Motivation
<a class=anchor href=#motivation>#</a></h2><p>The zoo of zk-SNARKs is complex to navigate and always changing. Groth16 (by Jens Groth in 2016) was an early protocol that was elegant, explainable, and very performant. A lot of educational resources concentrated on explaining it over its other contemporaries. However a main drawback of Groth16 is a trusted setup that cannot be shared between other people doing Groth16 proofs (unless if they are proving different inputs to the exact same function). Shareable (universal) trusted setups came in vogue. Plonk (by Ariel Gabizon, Zachary J. Williamson, & Oana Ciobotaru in 2019) has inherited the throne from Groth16 in terms of being one of the most popular zk-SNARKs to explain.</p><p>Is Plonk the &ldquo;best&rdquo; SNARK in 2024? By a lot of measures, it is not. Faster (both asymptotically and concretely) prover operations can be found elsewhere. Proof size and verifier time can be squeezed more than Plonk. Trusted setups can be abandoned altogether. Yet Plonk is <em>pretty good</em>. Importantly, it is also <em>pretty understandable</em>. And it is <em>pretty flexible</em>. For these reasons, Plonk is a great place to start when you are learning about SNARKs and when designing a custom protocol for proving something directlyâ€”not as a circuit on top of Plonk but using the same building blocks (or &ldquo;gadgets&rdquo;) that Plonk itself uses. We hope you find this <em>Plonkbook</em> helpful as a reference guide to various gadgets you can use.</p><h2 id=gadgets>Gadgets
<a class=anchor href=#gadgets>#</a></h2><p>Below is a quick summary of various gadgets you can use in your Poly-IOP systems.</p><table><thead><tr><th>Gadget</th><th>Short Description</th><th>Recap</th></tr></thead><tbody><tr><td>zero1</td><td>$\mathsf{Arr}[i]\leftarrow0$</td><td>Zero-out elements of an array $\mathsf{Arr}$ such as: all, first, last, all-but-first, all-but-last.</td></tr><tr><td>zero2</td><td>$\mathsf{Arr}[i]\leftarrow0$ iff $\mathsf{Sel}[i]=0$</td><td>Zero-out elements of an array $\mathsf{Arr}$ according to a binary array $\mathsf{Sel}$.</td></tr><tr><td>rotate</td><td>$\mathsf{Arr}[i]\leftarrow \mathsf{Arr}[i+\alpha]$</td><td>Rotate array $\mathsf{Arr}$ by $\alpha$ positions.</td></tr><tr><td>add1</td><td>$\mathsf{Arr}_3=\mathsf{Arr}_1 + \mathsf{Arr}_2$</td><td>Array $\mathsf{Arr}_3$ is the element-wise addition of $\mathsf{Arr}_1$ and $\mathsf{Arr}_2$.</td></tr><tr><td>add2</td><td>$\mathsf{Sum}_\mathsf{Arr}=\sum_{i = 0}^{n-1} \mathsf{Arr}[i]$</td><td>$\mathsf{Sum}_\mathsf{Arr}$ is the disclosed sum of all the elements in array $\mathsf{Arr}$.</td></tr><tr><td>add3</td><td>$\sum_{i = 0}^{n-1} \mathsf{Arr}_1[i]=\sum_{i = 0}^{n-1} \mathsf{Arr}_2[i]$</td><td>Arrays $\mathsf{Arr}_1$ and $\mathsf{Arr}_2$ have the same undisclosed sum.</td></tr><tr><td>mult1</td><td>$\mathsf{Arr}_3=\mathsf{Arr}_1 \cdot \mathsf{Arr}_2$</td><td>Array $\mathsf{Arr}_3$ is the element-wise multiplication of $\mathsf{Arr}_1$ and $\mathsf{Arr}_2$.</td></tr><tr><td>mult2</td><td>$\mathsf{Prod}_\mathsf{Arr}=\prod_{i = 0}^{n-1} \mathsf{Arr}[i]$</td><td>$\mathsf{Prod}_\mathsf{Arr}$ is the disclosed product of all the elements in array $\mathsf{Arr}$.</td></tr><tr><td>mult3</td><td>$\prod_{i = 0}^{n-1} \mathsf{Arr}_1[i]=\prod_{i = 0}^{n-1} \mathsf{Arr}_2[i]$</td><td>Arrays $\mathsf{Arr}_1$ and $\mathsf{Arr}_2$ have the same undisclosed product.</td></tr><tr><td>encode</td><td>$\mathsf{Arr}_3\leftarrow\mathsf{Encode}(\mathsf{Arr}_1,\mathsf{Arr}_2)$</td><td>Map a set of elements, such as the pair $\{\mathsf{Arr}_1[i],\mathsf{Arr}_2[i]\}$, into a single element $\mathsf{Arr}_3[i]$ without collisions.</td></tr><tr><td>shuffle1</td><td>$\mathsf{Arr}_2=\mathsf{Permute}(\mathsf{Arr}_1)$</td><td>Array $\mathsf{Arr}_2$ is a shuffle of $\mathsf{Arr}_1$ for some undisclosed permutation $\pi$.</td></tr><tr><td>shuffle2</td><td>$\mathsf{Arr}_2=\mathsf{Permute}(\mathsf{Arr}_1 ,\pi)$</td><td>Array $\mathsf{Arr}_2$ is a shuffle of $\mathsf{Arr}_1$ under a disclosed permutation $\pi$.</td></tr><tr><td>lookup1</td><td>$\mathsf{Arr}[i]\in \{0,1\}$</td><td>Each element of array $\mathsf{Arr}$ is in $\{0,1\}$ (or another small set).</td></tr><tr><td>lookup2</td><td>$\mathsf{Arr}[i]\in \mathsf{Table}$</td><td>Each element of array $\mathsf{Arr}$ is in a disclosed table of values $\mathsf{Table}$.</td></tr><tr><td>range</td><td>$\mathsf{Arr}[i]\in[0,r]$</td><td>Each element of array $\mathsf{Arr}$ is in the range $[0,r]$ for some upper-cap $r$.</td></tr><tr><td>circuit</td><td>$z=\mathsf{Circ}(x,y)$</td><td>$z$ is the output of disclosed arithmetic circuit $\mathsf{Circ}$ with disclosed (and/or undisclosed) inputs $x$ and $y$.</td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#motivation>Motivation</a></li><li><a href=#gadgets>Gadgets</a></li></ul></nav></div></aside></main></body></html>